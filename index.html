<html>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<head>
		<style> 
			input: {type: number;}
		</style>
	</head>
	<body>
		Damage<br><input inputmode="numeric" name="Damage" onchange="calc()" oninput="calc()" id="dmg"><br><br>
		Reload<br><input type="number" onchange="calc()" oninput="calc()" id="reload"><br><br>
		Fire Rate<br><input type="number" onchange="calc()" oninput="calc()" id="rate"><br><br>
		Magazine Size<br><input type="number" onchange="calc()" oninput="calc()" id="mag"><br><br>
		Elemental DPS<br><input type="number" onchange="calc()" oninput="calc()" id="edps"><br><br>
		Elemental Chance<br><input type="number" onchange="calc()" oninput="calc()" id="epct"><br><br>
		Effective DPS<br><input type="number" onchange="calc()" oninput="calc()" id="dps"><br><br>
		<br>
		<button onclick="reset()";>Reset</button>
		<script>
			function isNumeric(n) 
			{
				return !isNaN(parseFloat(n)) && isFinite(n);
			}
			function getvalfromid(id)
			{
				e = document.getElementById(id)
				if(isNumeric(e.value))
				{
					e.style.backgroundColor = ""
					return e.value
				}
				else if(e.value != "")
					e.style.backgroundColor = "indianred"
				// else if(e.value == "")
				// 	e.value = e.name
				return null
			}
			function reset()
			{
				console.log("resetting")
				inputs = ['dmg', 'reload', 'rate', 'mag', 'edps', 'epct', 'dmg'];
				for (id of inputs)
					document.getElementById(id).value = "";
			}
			function calc()
			{
				dmg = getvalfromid('dmg')
				reload = getvalfromid('reload')
				rate = getvalfromid('rate')
				mag = getvalfromid('mag')
				edps = getvalfromid('edps')
				epct = getvalfromid('epct')
				dps = 0
				if(dmg && reload && rate && mag)
					dps = (dmg*mag)/(mag/rate + reload)
				if(epct && edps)
					dps += edps*(epct/100)
				console.log("dps is ", dps)
				if(dps)
					document.getElementById('dps').value = dps

			}
		</script>
	</body>
</html>